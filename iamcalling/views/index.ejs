<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IAMCALLING - Homepage</title>
    <link rel="stylesheet" href="css/mobile-responsive.css">
    <style>
        :root{--primary-color:#0a3d0a;--secondary-color:#1a1a1a;--gold:#d4af37}
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Roboto',sans-serif;background-color:#f5f5f5;color:#333;line-height:1.6}
        .container{width:100%;max-width:1200px;margin:0 auto;padding:0 15px}
        .main-layout{display:flex;margin:2rem 0;gap:2rem}
        .content{flex:3}
        .sidebar{flex:1;position:sticky;top:80px;height:fit-content}
        .article-card{background:white;border-radius:12px;overflow:hidden;box-shadow:0 4px 6px rgba(0,0,0,0.1);margin-bottom:2rem;border:1px solid rgba(139,69,19,0.3);transition:transform 0.3s}
        .article-card:hover{transform:translateY(-5px);box-shadow:0 10px 20px rgba(0,0,0,0.15)}
        .article-thumbnail{position:relative;width:100%;height:200px;overflow:hidden}
        .thumbnail-image{width:100%;height:100%;object-fit:cover;transition:transform 0.3s}
        .article-card:hover .thumbnail-image{transform:scale(1.05)}
        .article-content{padding:1.5rem}
        .article-category{position:absolute;top:12px;left:12px;background:var(--primary-color);color:white;padding:0.3rem 0.8rem;border-radius:20px;font-size:0.6rem;font-weight:500;z-index:2}
        .article-title{font-family:'Playfair Display',serif;font-size:0.8rem;margin-bottom:0.6rem;color:var(--secondary-color);line-height:1.2}
        .article-meta{display:flex;justify-content:space-between;color:#777;font-size:0.6rem;margin-bottom:0.6rem}
        .read-more{background:var(--primary-color);color:white;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-weight:500;display:inline-flex;align-items:center;text-decoration:none;transition:background 0.3s;font-size:0.6rem}
        .read-more:hover{background:#0d4f0d}
        .skeleton-card{background:white;border-radius:12px;overflow:hidden;box-shadow:0 4px 6px rgba(0,0,0,0.1);margin-bottom:2rem}
        .skeleton-image{width:100%;height:200px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;animation:shimmer 1.5s infinite}
        .skeleton-content{padding:1.5rem}
        .skeleton-title{height:24px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;animation:shimmer 1.5s infinite;border-radius:4px;margin-bottom:1rem;width:80%}
        .skeleton-meta{height:16px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;animation:shimmer 1.5s infinite;border-radius:4px;width:60%;margin-bottom:1rem}
        .skeleton-button{height:32px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;animation:shimmer 1.5s infinite;border-radius:4px;width:100px}
        @keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
        .ideology-test-container{background:linear-gradient(135deg,#ffffff 0%,#f8f8f8 100%);border-radius:12px;padding:2rem;box-shadow:0 8px 25px rgba(0,0,0,0.15);text-align:center}
        .ideology-test-title{font-family:'Playfair Display',serif;font-size:0.8rem;margin-bottom:0.6rem;color:var(--secondary-color)}
        .ideology-test-button{background:linear-gradient(135deg,rgba(10,61,10,1) 0%,rgba(26,26,26,1) 100%);color:white;border:none;padding:0.6rem 1.2rem;border-radius:30px;font-weight:500;cursor:pointer;transition:all 0.3s ease;display:inline-flex;align-items:center;box-shadow:0 4px 15px rgba(0,0,0,0.2);text-decoration:none;justify-content:center;font-size:0.7rem;margin-top:0.6rem}
        @media (max-width:768px){.main-layout{gap:1rem;margin:1rem 0}.sidebar{min-width:100px}.container{padding:0 8px}}
    </style>
    <script src="js/universal-topbar-injector.js" defer async></script>
</head>
<body>
    <div class="container">
        <div class="main-layout">
            <div class="content" id="articlesContainer">
                <div style="text-align:center;padding:2rem;color:#666;">Loading...</div>
            </div>
            <aside class="sidebar">
                <div style="text-align:center;">
                    <a href="https://www.linkedin.com/in/pradip-kale-a116112a0" target="_blank" style="display:inline-flex;align-items:center;gap:0.4rem;background:#0077b5;color:white;padding:0.6rem 1rem;border-radius:8px;text-decoration:none;font-weight:600;transition:all 0.3s ease;box-shadow:0 4px 12px rgba(0,119,181,0.3);font-size:0.7rem;width:100%;justify-content:center;">
                        <i class="fab fa-linkedin" style="font-size:0.9rem;"></i> Follow on LinkedIn
                    </a>
                </div>
                
                <div style="margin-top:1rem;text-align:center;">
                    <a href="https://www.instagram.com/pradip_kale___?igsh=MW9oNndvb2RwMGZjeg==" target="_blank" style="display:inline-flex;align-items:center;gap:0.4rem;background:linear-gradient(45deg,#f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%);color:white;padding:0.6rem 1rem;border-radius:8px;text-decoration:none;font-weight:600;transition:all 0.3s ease;box-shadow:0 4px 12px rgba(188,24,136,0.3);font-size:0.7rem;width:100%;justify-content:center;">
                        <i class="fab fa-instagram" style="font-size:0.9rem;"></i> Follow on Instagram
                    </a>
                </div>
                
                <div class="ideology-test-container" style="margin-top:2rem;">
                    <h3 class="ideology-test-title">Develop Your Critical Thinking</h3>
                    <p style="color:#666;font-size:0.6rem;line-height:1.3;margin-bottom:0.8rem;">Prove us wrong with your analytical reasoning skills and upto 1000 Rs daily</p>
                    <a href="35-reward-claim.html" class="ideology-test-button">Start Earning <i class="fas fa-brain"></i></a>
                </div>
                
                <div style="margin-top:2rem;background:white;padding:1.5rem;border-radius:8px;box-shadow:0 4px 6px rgba(0,0,0,0.1);text-align:center;">
                    <a href="10-ideological-battle.html" class="ideology-test-button" style="display:inline-block;width:100%;text-align:center;background:linear-gradient(135deg,#dc3545,#c82333);">Ideological Battle <i class="fas fa-fist-raised"></i></a>
                </div>
                
                <div style="margin-top:2rem;background:white;padding:1rem;border-radius:8px;box-shadow:0 4px 6px rgba(0,0,0,0.1);">
                    <label style="display:block;color:#333;font-size:0.7rem;font-weight:600;margin-bottom:0.5rem;">Filter by Category</label>
                    <select id="categoryFilter" style="width:100%;padding:0.5rem;border:1px solid #ddd;border-radius:4px;font-size:0.7rem;background:white;color:#333;cursor:pointer;">
                        <option value="">All Categories</option>
                        <option value="innovation-tech">Innovation and Tech</option>
                        <option value="biology">Biology</option>
                        <option value="geography">Geography</option>
                        <option value="history">History</option>
                        <option value="ethics-morality">Ethics & Morality</option>
                        <option value="justice">Justice</option>
                        <option value="religious-truth">Religious Truth</option>
                        <option value="fact-check">Fact Check</option>
                        <option value="politics">Politics</option>
                    </select>
                </div>
                
                <div style="margin-top:2rem;background:white;padding:1.5rem;border-radius:8px;box-shadow:0 4px 6px rgba(0,0,0,0.1);text-align:center;">
                    <a href="01-response-index.html" class="ideology-test-button" style="display:inline-block;width:100%;text-align:center;">Public Articles <i class="fas fa-newspaper"></i></a>
                </div>
                
                <div style="margin-top:2rem;background:white;padding:1.5rem;border-radius:8px;box-shadow:0 4px 6px rgba(0,0,0,0.1);text-align:center;">
                    <a href="02-about.html" class="ideology-test-button" style="display:inline-block;width:100%;text-align:center;background:linear-gradient(135deg,#dc3545,#c82333);">About Us <i class="fas fa-info-circle"></i></a>
                </div>
            </aside>
        </div>
    </div>
    <script>
        window.POSTS_DATA = [];
        const container = document.getElementById('articlesContainer');
        
        // Show loading
        container.innerHTML = '<div style="text-align:center;padding:2rem;color:#666;">Loading posts...</div>';
        
        // Load posts via API (fast)
        fetch('/api/posts?limit=3')
            .then(r => r.json())
            .then(data => {
                window.POSTS_DATA = data.posts || [];
                renderPosts(window.POSTS_DATA);
            })
            .catch(() => {
                container.innerHTML = '<div style="text-align:center;padding:2rem;color:#666;">No posts available</div>';
            });
        
        function renderPosts(postsToRender) {
            if (!postsToRender || postsToRender.length === 0) {
                container.innerHTML = '<div style="text-align:center;padding:3rem;background:white;border-radius:8px;"><h3 style="color:#666;">No posts found</h3></div>';
                return;
            }
            container.innerHTML = postsToRender.map(p => `
                <div class="article-card" data-category="${p.category || ''}">
                    <div class="article-thumbnail">
                        <img src="${p.thumbnail_url || `https://picsum.photos/seed/post${p.id}/400/250`}" alt="${p.title}" class="thumbnail-image" loading="lazy">
                        <div class="article-category">Official</div>
                    </div>
                    <div class="article-content">
                        <h2 class="article-title">${p.title}</h2>
                        <div class="article-meta">
                            <div><span>${p.author_name || 'Admin'}</span></div>
                            <span>${new Date(p.created_at).toLocaleDateString()}</span>
                        </div>
                        <div style="margin-top:1rem;">
                            <a href="07-readmore.html?id=${p.id}" class="read-more">Read More ‚Üí</a>
                            <span style="color:#666;font-size:0.6rem;margin-left:1rem;">üëÅ ${p.views_count || 0} views</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        document.getElementById('categoryFilter').addEventListener('change', function(e) {
            const category = e.target.value.toLowerCase();
            if (!category) {
                renderPosts(window.POSTS_DATA);
            } else {
                const filtered = window.POSTS_DATA.filter(p => (p.category || '').toLowerCase() === category);
                renderPosts(filtered);
            }
        });
    </script>
</body>
</html>
