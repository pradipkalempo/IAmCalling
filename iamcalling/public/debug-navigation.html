<!DOCTYPE html>
<html>
<head>
    <title>Navigation Debug Test</title>
    <script src="js/universal-topbar-injector.js"></script>
    <style>
        body { padding: 100px 20px; font-family: Arial, sans-serif; }
        .debug-info { background: #f0f0f0; padding: 20px; margin: 20px 0; border-radius: 8px; }
        .debug-info h3 { margin-top: 0; color: #333; }
        .debug-info pre { background: white; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>Navigation Debug Test</h1>
    
    <div class="debug-info">
        <h3>Project Links Status</h3>
        <div id="projectLinksStatus">Loading...</div>
    </div>
    
    <div class="debug-info">
        <h3>Navigation Links Status</h3>
        <div id="navLinksStatus">Loading...</div>
    </div>
    
    <div class="debug-info">
        <h3>Universal Topbar Status</h3>
        <div id="topbarStatus">Loading...</div>
    </div>
    
    <div class="debug-info">
        <h3>DOM Inspection</h3>
        <button onclick="inspectTopbar()">Inspect Topbar DOM</button>
        <div id="domInspection"></div>
    </div>

    <script>
        function checkProjectLinks() {
            const status = document.getElementById('projectLinksStatus');
            if (window.PROJECT_LINKS) {
                status.innerHTML = '<strong>✅ PROJECT_LINKS loaded</strong><pre>' + JSON.stringify(window.PROJECT_LINKS, null, 2) + '</pre>';
            } else {
                status.innerHTML = '❌ PROJECT_LINKS not loaded';
            }
        }
        
        function checkNavLinks() {
            const status = document.getElementById('navLinksStatus');
            if (window.NAV_LINKS) {
                status.innerHTML = '<strong>✅ NAV_LINKS loaded</strong><pre>' + JSON.stringify(window.NAV_LINKS, null, 2) + '</pre>';
            } else {
                status.innerHTML = '❌ NAV_LINKS not loaded';
            }
        }
        
        function checkTopbar() {
            const status = document.getElementById('topbarStatus');
            if (window.universalTopBar) {
                status.innerHTML = '✅ Universal Topbar instance created';
            } else {
                status.innerHTML = '❌ Universal Topbar not created';
            }
        }
        
        function inspectTopbar() {
            const inspection = document.getElementById('domInspection');
            const topbar = document.querySelector('.universal-topbar');
            
            if (topbar) {
                const nav = topbar.querySelector('.topbar-nav');
                const links = topbar.querySelectorAll('.nav-link');
                
                inspection.innerHTML = `
                    <strong>✅ Topbar found in DOM</strong><br>
                    Navigation container: ${nav ? '✅ Found' : '❌ Missing'}<br>
                    Navigation links count: ${links.length}<br>
                    <strong>Topbar HTML:</strong>
                    <pre>${topbar.outerHTML}</pre>
                `;
            } else {
                inspection.innerHTML = '❌ No topbar found in DOM';
            }
        }
        
        function runAllChecks() {
            checkProjectLinks();
            checkNavLinks();
            checkTopbar();
        }
        
        // Wait for everything to load
        function waitAndCheck() {
            if (window.PROJECT_LINKS && window.NAV_LINKS && window.universalTopBar) {
                runAllChecks();
            } else {
                setTimeout(waitAndCheck, 100);
            }
        }
        
        document.addEventListener('DOMContentLoaded', waitAndCheck);
        
        // Also check after a delay
        setTimeout(runAllChecks, 2000);
    </script>
</body>
</html>